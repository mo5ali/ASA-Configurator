<!DOCTYPE html>
<html>
<head>
    <title>Simple OBJ Viewer</title>
    <style>
        body { 
            margin: 0; 
            padding: 0; 
            overflow: hidden; 
            background: #f0f0f0;
        }
        #canvas { 
            display: block; 
        }
        #loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 5px;
            font-family: Arial;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <div id="loading">Loading...</div>

    <!-- Three.js libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/OBJLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/MTLLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

    <script>
        // ============================================
        // CONFIGURATION - EDIT THESE VALUES
        // ============================================
        
        // BACKGROUND COLOR (light grey)
        const BACKGROUND_COLOR = 0xf0f0f0;
        
        // MODEL COLOR (blue-grey like CAD)
        const MODEL_COLOR = 0x607D8B;
        
        // ============================================
        // PASTE YOUR OBJ AND MTL CONTENT BELOW
        // ============================================
        
        // PASTE YOUR OBJ CONTENT HERE:
        const OBJ_CONTENT = `
`;

        // PASTE YOUR MTL CONTENT HERE:
        const MTL_CONTENT = `# 
# Wavefront material file
# Created with Kaydara FBX
# 

newmtl ILLEX13Material0
Ka 0.200000 0.200000 0.200000
Kd 0.200000 0.200000 0.200000
Ks 0.000000 0.000000 0.000000
illum 2
Ns 20.000000
Tr 1.000000

newmtl ILLEX13Material1
Ka 0.820000 0.820000 0.820000
Kd 0.820000 0.820000 0.820000
Ks 0.000000 0.000000 0.000000
illum 2
Ns 20.000000
Tr 1.000000
`;

        // ============================================
        // THREE.JS SETUP (DON'T EDIT BELOW UNLESS NEEDED)
        // ============================================

        let scene, camera, renderer, controls, model;

        function init() {
            // Create scene with light grey background
            scene = new THREE.Scene();
            scene.background = new THREE.Color(BACKGROUND_COLOR);
            
            // Create camera
            const canvas = document.getElementById('canvas');
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 5;
            
            // Create renderer
            renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            
            // Add OrbitControls (pan, rotate, zoom)
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            
            // Add basic lighting
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
            scene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.4);
            directionalLight.position.set(5, 10, 7);
            scene.add(directionalLight);
            
            // Load the model
            loadModel();
            
            // Handle window resize
            window.addEventListener('resize', onWindowResize);
            
            // Start animation loop
            animate();
        }

        function loadModel() {
            try {
                // Create blob URLs from string content
                const mtlBlob = new Blob([MTL_CONTENT], { type: 'text/plain' });
                const objBlob = new Blob([OBJ_CONTENT], { type: 'text/plain' });
                
                const mtlUrl = URL.createObjectURL(mtlBlob);
                const objUrl = URL.createObjectURL(objBlob);
                
                // Try to load MTL first
                const mtlLoader = new THREE.MTLLoader();
                
                mtlLoader.load(mtlUrl, (materials) => {
                    materials.preload();
                    
                    // Load OBJ with materials
                    const objLoader = new THREE.OBJLoader();
                    objLoader.setMaterials(materials);
                    
                    objLoader.load(objUrl, (object) => {
                        model = object;
                        setupModel(model);
                        hideLoading();
                    }, undefined, (error) => {
                        console.error('Error loading OBJ:', error);
                        // Try without materials
                        loadOBJWithoutMaterials(objUrl);
                    });
                    
                }, undefined, (error) => {
                    console.warn('Error loading MTL, using default material:', error);
                    // Load OBJ without materials
                    loadOBJWithoutMaterials(objUrl);
                });
                
            } catch (error) {
                console.error('Error:', error);
                hideLoading();
            }
        }

        function loadOBJWithoutMaterials(objUrl) {
            const objLoader = new THREE.OBJLoader();
            
            objLoader.load(objUrl, (object) => {
                model = object;
                setupModel(model);
                hideLoading();
            });
        }

        function setupModel(object) {
            // Apply CAD-like material
            object.traverse((child) => {
                if (child.isMesh) {
                    child.material = new THREE.MeshLambertMaterial({ 
                        color: MODEL_COLOR,
                        flatShading: false
                    });
                }
            });
            
            // Center and scale model to fit view
            const box = new THREE.Box3().setFromObject(object);
            const center = box.getCenter(new THREE.Vector3());
            const size = box.getSize(new THREE.Vector3());
            
            const maxSize = Math.max(size.x, size.y, size.z);
            const scale = 4 / maxSize;
            
            object.position.sub(center.multiplyScalar(scale));
            object.scale.setScalar(scale);
            
            scene.add(object);
        }

        function hideLoading() {
            document.getElementById('loading').style.display = 'none';
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        function animate() {
            requestAnimationFrame(animate);
            controls.update(); // Required for damping
            renderer.render(scene, camera);
        }

        // Start the application
        init();
    </script>
</body>
</html>